<%@page contentType="text/html;charset=utf-8" pageEncoding="utf-8" errorPage="guestbook_error.jsp"%>
<% response.setCharacterEncoding("utf-8"); %>

<jsp:useBean id="gb" scope="page" class="gusetbook.GuestBean" />
<jsp:setProperty name="gb" property="*" />

<%
    String action = request.getParameter("action");
    if (action.equals("insert")) {
        if (gb.insertDB()) {
            response.sendRedirect("guestbook_list.jsp");
        } else {
            throw new Exception("DB 입력오류");
        }
    } else if (action.equals("update")) {
        if (gb.updateDB()) {
            response.sendRedirect("guestbook_list.jsp");
        } else {
            throw new Exception("DB 갱신오류");
        }
    } else if (action.equals("delete")) {
        if (gb.deleteDB()) {
            response.sendRedirect("guestbook_list.jsp");
        } else {
            throw new Exception("DB 삭제오류");
        }
    }
%>